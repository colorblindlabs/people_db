<!DOCTYPE html>
<html lang="en" ng-app="MyApp" ng-controller="MainCtrl as vm">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>{{title}}</title>
    <!-- Main style -->
    <link rel="stylesheet" href="plugins/mdi/css/materialdesignicons.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lumx/1.1.5/lumx.css" />
    <link rel="stylesheet" href="plugins/angular-formly-templates-lumx/dist/formlyLumx.css">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:300,400,500,700">
    <!-- Core plugins -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/velocity/1.2.3/velocity.min.js"></script>
    <script type="text/javascript" src="//rawgit.com/kentcdodds/api-check/latest/dist/api-check.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.15.0/moment-with-locales.min.js"></script>
    <!-- Angular -->
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/angular.js/1.5.8/angular.min.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/angular.js/1.5.8/angular-messages.min.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/angular.js/1.5.8/angular-aria.min.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/angular-formly/8.4.0/formly.min.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/lumx/1.1.5/lumx.min.js"></script>
    <script type="text/javascript" src="plugins/angular-formly-templates-lumx/dist/formlyLumx.js"></script>
    <!-- Main script -->
    <script type="text/javascript" src="js/main.js"></script>
</head>

<body>
    <!-- Main sections -->
    <div class="p+" flex-container="row" flex-column="12" flex-gutter="10">
        <div flex-item="9" class="tc-black-1">
            <!-- People listing -->
            <div class="p+" flex-container="row" flex-gutter="16" flex-wrap>
                <div flex-item="16">
                    <ul class="list mt++">
                        <li class="list-row" ng-if="users.length < 1">
                            <div class="list-row__content">
                                <!-- <span class="display-block">Two-line item</span>
                                <span class="display-block fs-body-1 tc-black-2">Secondary text</span> -->
                                <pre>{{vm.model | json}}</pre>
                            </div>
                        </li>
                        <li class="list-row" ng-if="users.length > 0" ng-repeat="user in users | orderBy: 'fullname'">
                            <div class="list-row__content">
                                <div class="p+" flex-container="row" flex-column="12">
                                    <div flex-item="3">
                                        <div class="p+">
                                            <span class="display-block fs-headline">{{user.fullname}}</span>
                                            <span class="display-block fs-body-1 tc-black-2">
                                                <a href="" class="hover-el" ng-click="addR(user, user._id)" style="cursor: pointer;">[+ add relatives]</a>
                                            </span>
                                        </div>
                                    </div>
                                    <div flex-item="4">
                                        <div class="p+">
                                            {{user.personal.address}}
                                            <br/>{{user.personal.city}}
                                        </div>
                                    </div>
                                    <div flex-item="3">
                                        <div class="p+">
                                            <div ng-repeat="email in user.personal.email">
                                                <span>E: {{email}}</span>
                                            </div>
                                            <a href="" class="hover-el link" ng-click="addR(user, user._id)" style="cursor: pointer;"><small>[+ add more email]</small></a>
                                        </div>
                                        <div class="p+">
                                            <div ng-repeat="phone in user.personal.phone">
                                                <span>P: {{phone.number}} <small>({{phone.type}})</small></span>
                                            </div>
                                            <a href="" class="hover-el" ng-click="addR(user, user._id)" style="cursor: pointer;"><small>[+ add more phone]</small></a>
                                        </div>
                                    </div>
                                    <div flex-item="2">
                                        <div class="p+">
                                            <lx-button lx-type="flat" lx-color="orange" ng-click="edit(user, user._id)">Edit</lx-button>
                                            <lx-button lx-type="flat" lx-color="red" ng-click="delete(user._id)">Remove</lx-button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- <div class="divider divider--dark"></div> -->
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div flex-item="3" class="tc-black-1">
            <!-- Add data form -->
            <div class="card p+">
                <form ng-submit="vm.onSubmit()" name="vm.form" novalidate>
                    <formly-form model="vm.model" fields="vm.fields" form="vm.form" options="vm.options">
                        <br/>
                        <lx-button lx-type="flat" lx-color="teal" ng-disabled="vm.form.$pristine || vm.form.$invalid">Add Data</lx-button>
                        <lx-button lx-type="flat" lx-color="grey" ng-click="vm.options.resetModel()">Reset</lx-button>
                    </formly-form>
                </form>
            </div>
        </div>
    </div>
</body>

</html>
